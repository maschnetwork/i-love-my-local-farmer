com.ilmlf.delivery.DeliveryAppTest.testApiStack=[
  {
    "Outputs": {
      "ApiUrl": {
        "Value": {
          "Fn::Join": [
            "",
            [
              "https://",
              {
                "Ref": "ILMLFDelivery"
              },
              ".execute-api.eu-west-1.amazonaws.com/Prod"
            ]
          ]
        }
      }
    },
    "Parameters": {
      "AssetParameters8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0ArtifactHash3C448FD8": {
        "Description": "Artifact hash for asset \"8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0\"",
        "Type": "String"
      },
      "AssetParameters8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0S3Bucket1B8EA0D3": {
        "Description": "S3 bucket for asset \"8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0\"",
        "Type": "String"
      },
      "AssetParameters8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0S3VersionKeyBF3E344D": {
        "Description": "S3 key for asset version \"8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0\"",
        "Type": "String"
      },
      "AssetParametersc691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49cArtifactHash627DAAA7": {
        "Description": "Artifact hash for asset \"c691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49c\"",
        "Type": "String"
      },
      "AssetParametersc691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49cS3BucketEAC9DD43": {
        "Description": "S3 bucket for asset \"c691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49c\"",
        "Type": "String"
      },
      "AssetParametersc691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49cS3VersionKeyDD9AE9E7": {
        "Description": "S3 key for asset version \"c691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49c\"",
        "Type": "String"
      },
      "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbArtifactHash9589AE55": {
        "Description": "Artifact hash for asset \"d120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fb\"",
        "Type": "String"
      },
      "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3BucketFEE641E3": {
        "Description": "S3 bucket for asset \"d120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fb\"",
        "Type": "String"
      },
      "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084": {
        "Description": "S3 key for asset version \"d120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fb\"",
        "Type": "String"
      },
      "AssetParameterse1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2ArtifactHash08A3F3F2": {
        "Description": "Artifact hash for asset \"e1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2\"",
        "Type": "String"
      },
      "AssetParameterse1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2S3Bucket0C1D9011": {
        "Description": "S3 bucket for asset \"e1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2\"",
        "Type": "String"
      },
      "AssetParameterse1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2S3VersionKey3CC61CED": {
        "Description": "S3 key for asset version \"e1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2\"",
        "Type": "String"
      }
    },
    "Resources": {
      "AccountApiCwRole1997551D": {
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "apigateway.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          },
          "ManagedPolicyArns": [
            {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
                ]
              ]
            }
          ]
        },
        "Type": "AWS::IAM::Role"
      },
      "ApiGtwyAccountCwRole": {
        "DependsOn": [
          "ILMLFDelivery"
        ],
        "Properties": {
          "CloudWatchRoleArn": {
            "Fn::GetAtt": [
              "AccountApiCwRole1997551D",
              "Arn"
            ]
          }
        },
        "Type": "AWS::ApiGateway::Account"
      },
      "BookDelivery402AFA0C": {
        "DependsOn": [
          "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A",
          "FarmLambdaRdsProxyRoleWithIam7B69CDEF"
        ],
        "Properties": {
          "Code": {
            "S3Bucket": {
              "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3BucketFEE641E3"
            },
            "S3Key": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::Select": [
                      0,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "Fn::Select": [
                      1,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084"
                          }
                        ]
                      }
                    ]
                  }
                ]
              ]
            }
          },
          "Environment": {
            "Variables": {
              "CORS_ALLOW_ORIGIN_HEADER": "*",
              "DB_ADMIN_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
                      }
                    ]
                  }
                ]
              },
              "DB_ENDPOINT": {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2"
              },
              "DB_PORT": "3306",
              "DB_REGION": "eu-west-1",
              "DB_USER": "lambda_iam",
              "DB_USER_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                      }
                    ]
                  }
                ]
              },
              "JAVA_TOOL_OPTIONS": "-XX:+TieredCompilation -XX:TieredStopAtLevel=1"
            }
          },
          "Handler": "com.ilmlf.delivery.api.handlers.BookDelivery",
          "MemorySize": 2048,
          "Role": {
            "Fn::GetAtt": [
              "FarmLambdaRdsProxyRoleWithIam7B69CDEF",
              "Arn"
            ]
          },
          "Runtime": "java11",
          "Timeout": 60,
          "VpcConfig": {
            "SecurityGroupIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
              }
            ],
            "SubnetIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
              }
            ]
          }
        },
        "Type": "AWS::Lambda::Function"
      },
      "CreateSlots2FADEA09": {
        "DependsOn": [
          "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A",
          "FarmLambdaRdsProxyRoleWithIam7B69CDEF"
        ],
        "Properties": {
          "Code": {
            "S3Bucket": {
              "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3BucketFEE641E3"
            },
            "S3Key": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::Select": [
                      0,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "Fn::Select": [
                      1,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084"
                          }
                        ]
                      }
                    ]
                  }
                ]
              ]
            }
          },
          "Environment": {
            "Variables": {
              "CORS_ALLOW_ORIGIN_HEADER": "*",
              "DB_ADMIN_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
                      }
                    ]
                  }
                ]
              },
              "DB_ENDPOINT": {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2"
              },
              "DB_PORT": "3306",
              "DB_REGION": "eu-west-1",
              "DB_USER": "lambda_iam",
              "DB_USER_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                      }
                    ]
                  }
                ]
              },
              "JAVA_TOOL_OPTIONS": "-XX:+TieredCompilation -XX:TieredStopAtLevel=1"
            }
          },
          "Handler": "com.ilmlf.delivery.api.handlers.CreateSlots",
          "MemorySize": 2048,
          "Role": {
            "Fn::GetAtt": [
              "FarmLambdaRdsProxyRoleWithIam7B69CDEF",
              "Arn"
            ]
          },
          "Runtime": "java11",
          "Timeout": 60,
          "VpcConfig": {
            "SecurityGroupIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
              }
            ],
            "SubnetIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
              }
            ]
          }
        },
        "Type": "AWS::Lambda::Function"
      },
      "CreateSlotsCustomA504AA22": {
        "DependsOn": [
          "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A",
          "FarmLambdaRdsProxyRoleWithIam7B69CDEF"
        ],
        "Properties": {
          "Code": {
            "S3Bucket": {
              "Ref": "AssetParameters8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0S3Bucket1B8EA0D3"
            },
            "S3Key": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::Select": [
                      0,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParameters8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0S3VersionKeyBF3E344D"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "Fn::Select": [
                      1,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParameters8006e7f31da2526253fc63326dffbfa3b4942f777ab14eea78d1e3863bba21b0S3VersionKeyBF3E344D"
                          }
                        ]
                      }
                    ]
                  }
                ]
              ]
            }
          },
          "Environment": {
            "Variables": {
              "CORS_ALLOW_ORIGIN_HEADER": "*",
              "DB_ADMIN_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
                      }
                    ]
                  }
                ]
              },
              "DB_ENDPOINT": {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2"
              },
              "DB_PORT": "3306",
              "DB_REGION": "eu-west-1",
              "DB_USER": "lambda_iam",
              "DB_USER_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                      }
                    ]
                  }
                ]
              }
            }
          },
          "Handler": "com.ilmlf.delivery.api.handlers.CreateSlots",
          "MemorySize": 2048,
          "Role": {
            "Fn::GetAtt": [
              "FarmLambdaRdsProxyRoleWithIam7B69CDEF",
              "Arn"
            ]
          },
          "Runtime": "provided.al2",
          "Timeout": 60,
          "VpcConfig": {
            "SecurityGroupIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
              }
            ],
            "SubnetIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
              }
            ]
          }
        },
        "Type": "AWS::Lambda::Function"
      },
      "CreateSlotsDockerCustomA8B5199F": {
        "DependsOn": [
          "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A",
          "FarmLambdaRdsProxyRoleWithIam7B69CDEF"
        ],
        "Properties": {
          "Code": {
            "ImageUri": {
              "Fn::Join": [
                "",
                [
                  "123456789012.dkr.ecr.eu-west-1.",
                  {
                    "Ref": "AWS::URLSuffix"
                  },
                  "/aws-cdk/assets:cf7846de3d78d22c487165a2461eb76b8949ef53896e170c8fe149c253e6d261"
                ]
              ]
            }
          },
          "Environment": {
            "Variables": {
              "CORS_ALLOW_ORIGIN_HEADER": "*",
              "DB_ADMIN_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
                      }
                    ]
                  }
                ]
              },
              "DB_ENDPOINT": {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2"
              },
              "DB_PORT": "3306",
              "DB_REGION": "eu-west-1",
              "DB_USER": "lambda_iam",
              "DB_USER_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                      }
                    ]
                  }
                ]
              },
              "JAVA_TOOL_OPTIONS": "-XX:+TieredCompilation -XX:TieredStopAtLevel=1"
            }
          },
          "FunctionName": "CreateSlotsDockerCustom",
          "MemorySize": 2048,
          "PackageType": "Image",
          "Role": {
            "Fn::GetAtt": [
              "FarmLambdaRdsProxyRoleWithIam7B69CDEF",
              "Arn"
            ]
          },
          "Timeout": 60,
          "VpcConfig": {
            "SecurityGroupIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
              }
            ],
            "SubnetIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
              }
            ]
          }
        },
        "Type": "AWS::Lambda::Function"
      },
      "CreateSlotsDockerE7D6E292": {
        "DependsOn": [
          "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A",
          "FarmLambdaRdsProxyRoleWithIam7B69CDEF"
        ],
        "Properties": {
          "Code": {
            "ImageUri": {
              "Fn::Join": [
                "",
                [
                  "123456789012.dkr.ecr.eu-west-1.",
                  {
                    "Ref": "AWS::URLSuffix"
                  },
                  "/aws-cdk/assets:14f27e41e09f6386b21160fd8ed782dbbd0aa4435222aa4992bcd2c464281a7a"
                ]
              ]
            }
          },
          "Environment": {
            "Variables": {
              "CORS_ALLOW_ORIGIN_HEADER": "*",
              "DB_ADMIN_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
                      }
                    ]
                  }
                ]
              },
              "DB_ENDPOINT": {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2"
              },
              "DB_PORT": "3306",
              "DB_REGION": "eu-west-1",
              "DB_USER": "lambda_iam",
              "DB_USER_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                      }
                    ]
                  }
                ]
              },
              "JAVA_TOOL_OPTIONS": "-XX:+TieredCompilation -XX:TieredStopAtLevel=1"
            }
          },
          "FunctionName": "CreateSlotsDocker",
          "MemorySize": 2048,
          "PackageType": "Image",
          "Role": {
            "Fn::GetAtt": [
              "FarmLambdaRdsProxyRoleWithIam7B69CDEF",
              "Arn"
            ]
          },
          "Timeout": 60,
          "VpcConfig": {
            "SecurityGroupIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
              }
            ],
            "SubnetIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
              }
            ]
          }
        },
        "Type": "AWS::Lambda::Function"
      },
      "CreateSlotsUber6856C731": {
        "DependsOn": [
          "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A",
          "FarmLambdaRdsProxyRoleWithIam7B69CDEF"
        ],
        "Properties": {
          "Code": {
            "S3Bucket": {
              "Ref": "AssetParameterse1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2S3Bucket0C1D9011"
            },
            "S3Key": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::Select": [
                      0,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParameterse1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2S3VersionKey3CC61CED"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "Fn::Select": [
                      1,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParameterse1ff2bf3957b7c0b24620230b0dc055bc29a16fea317ad5b36a301832ede65f2S3VersionKey3CC61CED"
                          }
                        ]
                      }
                    ]
                  }
                ]
              ]
            }
          },
          "Environment": {
            "Variables": {
              "CORS_ALLOW_ORIGIN_HEADER": "*",
              "DB_ADMIN_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
                      }
                    ]
                  }
                ]
              },
              "DB_ENDPOINT": {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2"
              },
              "DB_PORT": "3306",
              "DB_REGION": "eu-west-1",
              "DB_USER": "lambda_iam",
              "DB_USER_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                      }
                    ]
                  }
                ]
              },
              "JAVA_TOOL_OPTIONS": "-XX:+TieredCompilation -XX:TieredStopAtLevel=1"
            }
          },
          "Handler": "com.ilmlf.delivery.api.handlers.CreateSlots",
          "MemorySize": 2048,
          "Role": {
            "Fn::GetAtt": [
              "FarmLambdaRdsProxyRoleWithIam7B69CDEF",
              "Arn"
            ]
          },
          "Runtime": "java11",
          "Timeout": 60,
          "VpcConfig": {
            "SecurityGroupIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
              }
            ],
            "SubnetIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
              }
            ]
          }
        },
        "Type": "AWS::Lambda::Function"
      },
      "ErrorAlarmTopicB94BACEE": {
        "Properties": {
          "TopicName": "ErrorAlarmTopic"
        },
        "Type": "AWS::SNS::Topic"
      },
      "FarmLambdaRdsProxyRoleWithIam7B69CDEF": {
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "lambda.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          },
          "ManagedPolicyArns": [
            {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
                ]
              ]
            }
          ]
        },
        "Type": "AWS::IAM::Role"
      },
      "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A": {
        "Properties": {
          "PolicyDocument": {
            "Statement": [
              {
                "Action": "rds-db:connect",
                "Effect": "Allow",
                "Resource": "arn:aws:rds-db:eu-west-1:123456789012:dbuser:*/lambda_iam"
              }
            ],
            "Version": "2012-10-17"
          },
          "PolicyName": "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A",
          "Roles": [
            {
              "Ref": "FarmLambdaRdsProxyRoleWithIam7B69CDEF"
            }
          ]
        },
        "Type": "AWS::IAM::Policy"
      },
      "FarmLambdaRdsRoleWithPwDefaultPolicyAD630DD5": {
        "Properties": {
          "PolicyDocument": {
            "Statement": [
              {
                "Action": [
                  "secretsmanager:GetSecretValue",
                  "secretsmanager:DescribeSecret"
                ],
                "Effect": "Allow",
                "Resource": [
                  {
                    "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefFarmerDBSecretAttachment8D79E04A025407E0"
                  },
                  {
                    "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                  }
                ]
              }
            ],
            "Version": "2012-10-17"
          },
          "PolicyName": "FarmLambdaRdsRoleWithPwDefaultPolicyAD630DD5",
          "Roles": [
            {
              "Ref": "FarmLambdaRdsRoleWithPwF0CBBFD7"
            }
          ]
        },
        "Type": "AWS::IAM::Policy"
      },
      "FarmLambdaRdsRoleWithPwF0CBBFD7": {
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "lambda.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          },
          "ManagedPolicyArns": [
            {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
                ]
              ]
            }
          ]
        },
        "Type": "AWS::IAM::Role"
      },
      "FunctionDashboardA7FF982A": {
        "Properties": {
          "DashboardBody": {
            "Fn::Join": [
              "",
              [
                "{\"widgets\":[{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"GetSlots-Invocations\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
                {
                  "Ref": "GetSlots6224F85D"
                },
                "\",{\"label\":\"Number of Invocations\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"GetSlots-Errors\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"annotations\":{\"alarms\":[\"",
                {
                  "Fn::GetAtt": [
                    "FunctionDashboardGetSlotsErrorsAlarmF97BC1E3",
                    "Arn"
                  ]
                },
                "\"]},\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"GetSlots-NoSlotsFound\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"DeliveryApi\",\"NoSlotsFound\",\"FunctionName\",\"GetSlots\",\"LogGroup\",\"",
                {
                  "Ref": "GetSlots6224F85D"
                },
                "\",\"ServiceName\",\"",
                {
                  "Ref": "GetSlots6224F85D"
                },
                "\",\"ServiceType\",\"AWS::Lambda::Function\",{\"label\":\"GetSlots When Farm Has No Slots\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"GetSlots-SlotsReturned\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"DeliveryApi\",\"SlotsReturned\",\"FunctionName\",\"GetSlots\",\"LogGroup\",\"",
                {
                  "Ref": "GetSlots6224F85D"
                },
                "\",\"ServiceName\",\"",
                {
                  "Ref": "GetSlots6224F85D"
                },
                "\",\"ServiceType\",\"AWS::Lambda::Function\",{\"label\":\"GetSlots Number of Slots Returned\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"GetSlots-SqlExceptions\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"annotations\":{\"alarms\":[\"",
                {
                  "Fn::GetAtt": [
                    "FunctionDashboardGetSlotsSqlExceptionAlarmCA42D836",
                    "Arn"
                  ]
                },
                "\"]},\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"CreateSlots-Invocations\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
                {
                  "Ref": "CreateSlots2FADEA09"
                },
                "\",{\"label\":\"Number of Invocations\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"CreateSlots-Errors\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"annotations\":{\"alarms\":[\"",
                {
                  "Fn::GetAtt": [
                    "FunctionDashboardCreateSlotsErrorsAlarm3E026505",
                    "Arn"
                  ]
                },
                "\"]},\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"CreateSlots-FailedToSaveSlots\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"annotations\":{\"alarms\":[\"",
                {
                  "Fn::GetAtt": [
                    "FunctionDashboardCreateSlotsFailedToSaveSlotsAlarm84E86969",
                    "Arn"
                  ]
                },
                "\"]},\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"CreateSlots-Exceptions\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"annotations\":{\"alarms\":[\"",
                {
                  "Fn::GetAtt": [
                    "FunctionDashboardCreateSlotsExceptionAlarm1FCF137E",
                    "Arn"
                  ]
                },
                "\"]},\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"CreateSlots-InvalidSlotList\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"DeliveryApi\",\"InvalidSlotList\",\"FunctionName\",\"CreateSlots\",\"LogGroup\",\"",
                {
                  "Ref": "CreateSlots2FADEA09"
                },
                "\",\"ServiceName\",\"",
                {
                  "Ref": "CreateSlots2FADEA09"
                },
                "\",\"ServiceType\",\"AWS::Lambda::Function\",{\"label\":\"CreateSlots Received Invalid Slot List\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":36,\"properties\":{\"view\":\"timeSeries\",\"title\":\"BookDelivery-Invocations\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",{\"label\":\"Number of Invocations\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":36,\"properties\":{\"view\":\"timeSeries\",\"title\":\"BookDelivery-Errors\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"annotations\":{\"alarms\":[\"",
                {
                  "Fn::GetAtt": [
                    "FunctionDashboardBookDeliveryErrorsAlarm85BA0395",
                    "Arn"
                  ]
                },
                "\"]},\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":0,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"BookDelivery-InvalidUserId\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"DeliveryApi\",\"InvalidUserId\",\"FunctionName\",\"BookDelivery\",\"LogGroup\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",\"ServiceName\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",\"ServiceType\",\"AWS::Lambda::Function\",{\"label\":\"BookDelivery Received Invalid User Id\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":6,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"BookDelivery-DeliveryBooked\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"DeliveryApi\",\"DeliveryBooked\",\"FunctionName\",\"BookDelivery\",\"LogGroup\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",\"ServiceName\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",\"ServiceType\",\"AWS::Lambda::Function\",{\"label\":\"DeliveryBooked\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":12,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"BookDelivery-FarmAndSlotInvalid\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"DeliveryApi\",\"FarmAndSlotInvalid\",\"FunctionName\",\"BookDelivery\",\"LogGroup\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",\"ServiceName\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",\"ServiceType\",\"AWS::Lambda::Function\",{\"label\":\"BookDelivery Farm and Slot Invalid\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":18,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"BookDelivery-NoAvailableDelivery\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"metrics\":[[\"DeliveryApi\",\"NoAvailableDelivery\",\"FunctionName\",\"BookDelivery\",\"LogGroup\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",\"ServiceName\",\"",
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "\",\"ServiceType\",\"AWS::Lambda::Function\",{\"label\":\"BookDelivery No Available Delivery\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":48,\"properties\":{\"view\":\"timeSeries\",\"title\":\"BookDelivery-SqlExceptions\",\"region\":\"",
                {
                  "Ref": "AWS::Region"
                },
                "\",\"annotations\":{\"alarms\":[\"",
                {
                  "Fn::GetAtt": [
                    "FunctionDashboardBookDeliverySqlExceptionAlarmC621DB45",
                    "Arn"
                  ]
                },
                "\"]},\"yAxis\":{}}}]}"
              ]
            ]
          },
          "DashboardName": "FunctionDashboard"
        },
        "Type": "AWS::CloudWatch::Dashboard"
      },
      "FunctionDashboardBookDeliveryErrorsAlarm85BA0395": {
        "Properties": {
          "AlarmActions": [
            {
              "Ref": "ErrorAlarmTopicB94BACEE"
            }
          ],
          "AlarmName": {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "-ErrorsAlarm"
              ]
            ]
          },
          "ComparisonOperator": "GreaterThanOrEqualToThreshold",
          "EvaluationPeriods": 1,
          "Metrics": [
            {
              "Id": "m1",
              "Label": "Number of Errors",
              "MetricStat": {
                "Metric": {
                  "Dimensions": [
                    {
                      "Name": "FunctionName",
                      "Value": {
                        "Ref": "BookDelivery402AFA0C"
                      }
                    }
                  ],
                  "MetricName": "Errors",
                  "Namespace": "AWS/Lambda"
                },
                "Period": 300,
                "Stat": "Sum"
              },
              "ReturnData": true
            }
          ],
          "Threshold": 2
        },
        "Type": "AWS::CloudWatch::Alarm"
      },
      "FunctionDashboardBookDeliverySqlExceptionAlarmC621DB45": {
        "Properties": {
          "AlarmActions": [
            {
              "Ref": "ErrorAlarmTopicB94BACEE"
            }
          ],
          "AlarmName": {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "BookDelivery402AFA0C"
                },
                "-SqlExceptionAlarm"
              ]
            ]
          },
          "ComparisonOperator": "GreaterThanOrEqualToThreshold",
          "EvaluationPeriods": 1,
          "Metrics": [
            {
              "Id": "m1",
              "Label": "BookDelivery Sql Exception",
              "MetricStat": {
                "Metric": {
                  "Dimensions": [
                    {
                      "Name": "FunctionName",
                      "Value": "BookDelivery"
                    },
                    {
                      "Name": "LogGroup",
                      "Value": {
                        "Ref": "BookDelivery402AFA0C"
                      }
                    },
                    {
                      "Name": "ServiceName",
                      "Value": {
                        "Ref": "BookDelivery402AFA0C"
                      }
                    },
                    {
                      "Name": "ServiceType",
                      "Value": "AWS::Lambda::Function"
                    }
                  ],
                  "MetricName": "SqlException",
                  "Namespace": "DeliveryApi"
                },
                "Period": 300,
                "Stat": "Sum"
              },
              "ReturnData": true
            }
          ],
          "Threshold": 1
        },
        "Type": "AWS::CloudWatch::Alarm"
      },
      "FunctionDashboardCreateSlotsErrorsAlarm3E026505": {
        "Properties": {
          "AlarmActions": [
            {
              "Ref": "ErrorAlarmTopicB94BACEE"
            }
          ],
          "AlarmName": {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "CreateSlots2FADEA09"
                },
                "-ErrorsAlarm"
              ]
            ]
          },
          "ComparisonOperator": "GreaterThanOrEqualToThreshold",
          "EvaluationPeriods": 1,
          "Metrics": [
            {
              "Id": "m1",
              "Label": "Number of Errors",
              "MetricStat": {
                "Metric": {
                  "Dimensions": [
                    {
                      "Name": "FunctionName",
                      "Value": {
                        "Ref": "CreateSlots2FADEA09"
                      }
                    }
                  ],
                  "MetricName": "Errors",
                  "Namespace": "AWS/Lambda"
                },
                "Period": 300,
                "Stat": "Sum"
              },
              "ReturnData": true
            }
          ],
          "Threshold": 2
        },
        "Type": "AWS::CloudWatch::Alarm"
      },
      "FunctionDashboardCreateSlotsExceptionAlarm1FCF137E": {
        "Properties": {
          "AlarmActions": [
            {
              "Ref": "ErrorAlarmTopicB94BACEE"
            }
          ],
          "AlarmName": {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "CreateSlots2FADEA09"
                },
                "-ExceptionsAlarm"
              ]
            ]
          },
          "ComparisonOperator": "GreaterThanOrEqualToThreshold",
          "EvaluationPeriods": 1,
          "Metrics": [
            {
              "Id": "m1",
              "Label": "CreateSlots Insert Exception",
              "MetricStat": {
                "Metric": {
                  "Dimensions": [
                    {
                      "Name": "FunctionName",
                      "Value": "CreateSlots"
                    },
                    {
                      "Name": "LogGroup",
                      "Value": {
                        "Ref": "CreateSlots2FADEA09"
                      }
                    },
                    {
                      "Name": "ServiceName",
                      "Value": {
                        "Ref": "CreateSlots2FADEA09"
                      }
                    },
                    {
                      "Name": "ServiceType",
                      "Value": "AWS::Lambda::Function"
                    }
                  ],
                  "MetricName": "CreateSlotsException",
                  "Namespace": "DeliveryApi"
                },
                "Period": 300,
                "Stat": "Sum"
              },
              "ReturnData": true
            }
          ],
          "Threshold": 1
        },
        "Type": "AWS::CloudWatch::Alarm"
      },
      "FunctionDashboardCreateSlotsFailedToSaveSlotsAlarm84E86969": {
        "Properties": {
          "AlarmActions": [
            {
              "Ref": "ErrorAlarmTopicB94BACEE"
            }
          ],
          "AlarmName": {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "CreateSlots2FADEA09"
                },
                "-FailedToSaveSlotsAlarm"
              ]
            ]
          },
          "ComparisonOperator": "GreaterThanOrEqualToThreshold",
          "EvaluationPeriods": 1,
          "Metrics": [
            {
              "Id": "m1",
              "Label": "CreateSlots Failed to Save Slots",
              "MetricStat": {
                "Metric": {
                  "Dimensions": [
                    {
                      "Name": "FunctionName",
                      "Value": "CreateSlots"
                    },
                    {
                      "Name": "LogGroup",
                      "Value": {
                        "Ref": "CreateSlots2FADEA09"
                      }
                    },
                    {
                      "Name": "ServiceName",
                      "Value": {
                        "Ref": "CreateSlots2FADEA09"
                      }
                    },
                    {
                      "Name": "ServiceType",
                      "Value": "AWS::Lambda::Function"
                    }
                  ],
                  "MetricName": "FailedToSaveSlots",
                  "Namespace": "DeliveryApi"
                },
                "Period": 300,
                "Stat": "Sum"
              },
              "ReturnData": true
            }
          ],
          "Threshold": 1
        },
        "Type": "AWS::CloudWatch::Alarm"
      },
      "FunctionDashboardGetSlotsErrorsAlarmF97BC1E3": {
        "Properties": {
          "AlarmActions": [
            {
              "Ref": "ErrorAlarmTopicB94BACEE"
            }
          ],
          "AlarmName": {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "GetSlots6224F85D"
                },
                "-ErrorsAlarm"
              ]
            ]
          },
          "ComparisonOperator": "GreaterThanOrEqualToThreshold",
          "EvaluationPeriods": 1,
          "Metrics": [
            {
              "Id": "m1",
              "Label": "Number of Errors",
              "MetricStat": {
                "Metric": {
                  "Dimensions": [
                    {
                      "Name": "FunctionName",
                      "Value": {
                        "Ref": "GetSlots6224F85D"
                      }
                    }
                  ],
                  "MetricName": "Errors",
                  "Namespace": "AWS/Lambda"
                },
                "Period": 300,
                "Stat": "Sum"
              },
              "ReturnData": true
            }
          ],
          "Threshold": 2
        },
        "Type": "AWS::CloudWatch::Alarm"
      },
      "FunctionDashboardGetSlotsSqlExceptionAlarmCA42D836": {
        "Properties": {
          "AlarmActions": [
            {
              "Ref": "ErrorAlarmTopicB94BACEE"
            }
          ],
          "AlarmName": {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "GetSlots6224F85D"
                },
                "-SqlExceptionAlarm"
              ]
            ]
          },
          "ComparisonOperator": "GreaterThanOrEqualToThreshold",
          "EvaluationPeriods": 1,
          "Metrics": [
            {
              "Id": "m1",
              "Label": "GetSlots SqlException",
              "MetricStat": {
                "Metric": {
                  "Dimensions": [
                    {
                      "Name": "FunctionName",
                      "Value": "GetSlots"
                    },
                    {
                      "Name": "LogGroup",
                      "Value": {
                        "Ref": "GetSlots6224F85D"
                      }
                    },
                    {
                      "Name": "ServiceName",
                      "Value": {
                        "Ref": "GetSlots6224F85D"
                      }
                    },
                    {
                      "Name": "ServiceType",
                      "Value": "AWS::Lambda::Function"
                    }
                  ],
                  "MetricName": "SqlException",
                  "Namespace": "DeliveryApi"
                },
                "Period": 300,
                "Stat": "Sum"
              },
              "ReturnData": true
            }
          ],
          "Threshold": 1
        },
        "Type": "AWS::CloudWatch::Alarm"
      },
      "GetSlots6224F85D": {
        "DependsOn": [
          "FarmLambdaRdsProxyRoleWithIamDefaultPolicyE0B0D73A",
          "FarmLambdaRdsProxyRoleWithIam7B69CDEF"
        ],
        "Properties": {
          "Code": {
            "S3Bucket": {
              "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3BucketFEE641E3"
            },
            "S3Key": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::Select": [
                      0,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "Fn::Select": [
                      1,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084"
                          }
                        ]
                      }
                    ]
                  }
                ]
              ]
            }
          },
          "Environment": {
            "Variables": {
              "CORS_ALLOW_ORIGIN_HEADER": "*",
              "DB_ADMIN_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
                      }
                    ]
                  }
                ]
              },
              "DB_ENDPOINT": {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2"
              },
              "DB_PORT": "3306",
              "DB_REGION": "eu-west-1",
              "DB_USER": "lambda_iam",
              "DB_USER_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                      }
                    ]
                  }
                ]
              },
              "JAVA_TOOL_OPTIONS": "-XX:+TieredCompilation -XX:TieredStopAtLevel=1"
            }
          },
          "Handler": "com.ilmlf.delivery.api.handlers.GetSlots",
          "MemorySize": 2048,
          "Role": {
            "Fn::GetAtt": [
              "FarmLambdaRdsProxyRoleWithIam7B69CDEF",
              "Arn"
            ]
          },
          "Runtime": "java11",
          "Timeout": 60,
          "VpcConfig": {
            "SecurityGroupIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
              }
            ],
            "SubnetIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
              }
            ]
          }
        },
        "Type": "AWS::Lambda::Function"
      },
      "ILMLFDelivery": {
        "Properties": {
          "AccessLogSetting": {
            "DestinationArn": {
              "Fn::GetAtt": [
                "ILMLFDeliveryAccessF3713532",
                "Arn"
              ]
            },
            "Format": "{status=$context.status, profile=$context.authorizer.claims.profile, ip=$context.identity.sourceIp, requestId=$context.requestId, responseLength=$context.responseLength, httpMethod=$context.httpMethod, protocol=$context.protocol, resourcePath=$context.resourcePath, requestTime=$context.requestTime, username=$context.authorizer.claims['cognito:username']}"
          },
          "Cors": {
            "AllowHeaders": "'*'",
            "AllowMethods": "'*'",
            "AllowOrigin": "'*'"
          },
          "DefinitionBody": {
            "components": {
              "schemas": {
                "CreateSlot": {
                  "properties": {
                    "slots": {
                      "items": {
                        "$ref": "#/components/schemas/NewSlot"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "DeliveryBooking": {
                  "properties": {
                    "userId": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "NewSlot": {
                  "properties": {
                    "from": {
                      "type": "string"
                    },
                    "numDeliveries": {
                      "type": "integer"
                    },
                    "to": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "Slot": {
                  "properties": {
                    "from": {
                      "type": "string"
                    },
                    "slotId": {
                      "type": "string"
                    },
                    "to": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "Slots": {
                  "properties": {
                    "availableSlots": {
                      "items": {
                        "$ref": "#/components/schemas/Slot"
                      },
                      "type": "array"
                    },
                    "farmId": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "info": {
              "description": "API spec for the ILMLF delivery service",
              "title": "Delivery Service API",
              "version": "1.0"
            },
            "openapi": "3.0.1",
            "paths": {
              "/farm/{farm-id}/slot/{slot-id}": {
                "put": {
                  "operationId": "Book Delivery",
                  "parameters": [
                    {
                      "in": "path",
                      "name": "farm-id",
                      "required": true,
                      "schema": {
                        "type": "string"
                      }
                    },
                    {
                      "in": "path",
                      "name": "slot-id",
                      "required": true,
                      "schema": {
                        "type": "string"
                      }
                    }
                  ],
                  "requestBody": {
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/DeliveryBooking"
                        }
                      }
                    },
                    "required": true
                  },
                  "responses": {
                    "200": {
                      "description": "200 response",
                      "headers": {
                        "Access-Control-Allow-Origin": {
                          "schema": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  },
                  "x-amazon-apigateway-integration": {
                    "credentials": {
                      "Fn::GetAtt": [
                        "apiRole0DDF0297",
                        "Arn"
                      ]
                    },
                    "httpMethod": "POST",
                    "payloadFormatVersion": 1,
                    "type": "AWS_PROXY",
                    "uri": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",
                          {
                            "Fn::GetAtt": [
                              "BookDelivery402AFA0C",
                              "Arn"
                            ]
                          },
                          "/invocations"
                        ]
                      ]
                    }
                  }
                }
              },
              "/farm/{farm-id}/slots": {
                "get": {
                  "operationId": "GET HTTP",
                  "parameters": [
                    {
                      "in": "path",
                      "name": "farm-id",
                      "required": true,
                      "schema": {
                        "type": "string"
                      }
                    }
                  ],
                  "responses": {
                    "200": {
                      "content": {
                        "application/json": {
                          "schema": {
                            "$ref": "#/components/schemas/Slots"
                          }
                        }
                      },
                      "description": "200 response",
                      "headers": {
                        "Access-Control-Allow-Origin": {
                          "schema": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  },
                  "x-amazon-apigateway-integration": {
                    "credentials": {
                      "Fn::GetAtt": [
                        "apiRole0DDF0297",
                        "Arn"
                      ]
                    },
                    "httpMethod": "POST",
                    "payloadFormatVersion": 1,
                    "type": "AWS_PROXY",
                    "uri": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",
                          {
                            "Fn::GetAtt": [
                              "GetSlots6224F85D",
                              "Arn"
                            ]
                          },
                          "/invocations"
                        ]
                      ]
                    }
                  }
                },
                "post": {
                  "operationId": "Create Delivery Slot",
                  "parameters": [
                    {
                      "in": "path",
                      "name": "farm-id",
                      "required": true,
                      "schema": {
                        "type": "string"
                      }
                    }
                  ],
                  "requestBody": {
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/CreateSlot"
                        }
                      }
                    },
                    "required": true
                  },
                  "responses": {
                    "200": {
                      "description": "200 response",
                      "headers": {
                        "Access-Control-Allow-Origin": {
                          "schema": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  },
                  "x-amazon-apigateway-integration": {
                    "credentials": {
                      "Fn::GetAtt": [
                        "apiRole0DDF0297",
                        "Arn"
                      ]
                    },
                    "httpMethod": "POST",
                    "payloadFormatVersion": 1,
                    "type": "AWS_PROXY",
                    "uri": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",
                          {
                            "Fn::GetAtt": [
                              "CreateSlots2FADEA09",
                              "Arn"
                            ]
                          },
                          "/invocations"
                        ]
                      ]
                    }
                  }
                }
              },
              "/farm/{farm-id}/slots/custom": {
                "post": {
                  "operationId": "Create Delivery Slot Custom",
                  "parameters": [
                    {
                      "in": "path",
                      "name": "farm-id",
                      "required": true,
                      "schema": {
                        "type": "string"
                      }
                    }
                  ],
                  "requestBody": {
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/CreateSlot"
                        }
                      }
                    },
                    "required": true
                  },
                  "responses": {
                    "200": {
                      "description": "200 response",
                      "headers": {
                        "Access-Control-Allow-Origin": {
                          "schema": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  },
                  "x-amazon-apigateway-integration": {
                    "credentials": {
                      "Fn::GetAtt": [
                        "apiRole0DDF0297",
                        "Arn"
                      ]
                    },
                    "httpMethod": "POST",
                    "payloadFormatVersion": 1,
                    "type": "AWS_PROXY",
                    "uri": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",
                          {
                            "Fn::GetAtt": [
                              "CreateSlotsCustomA504AA22",
                              "Arn"
                            ]
                          },
                          "/invocations"
                        ]
                      ]
                    }
                  }
                }
              },
              "/farm/{farm-id}/slots/docker": {
                "post": {
                  "operationId": "Create Delivery Slot Docker",
                  "parameters": [
                    {
                      "in": "path",
                      "name": "farm-id",
                      "required": true,
                      "schema": {
                        "type": "string"
                      }
                    }
                  ],
                  "requestBody": {
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/CreateSlot"
                        }
                      }
                    },
                    "required": true
                  },
                  "responses": {
                    "200": {
                      "description": "200 response",
                      "headers": {
                        "Access-Control-Allow-Origin": {
                          "schema": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  },
                  "x-amazon-apigateway-integration": {
                    "credentials": {
                      "Fn::GetAtt": [
                        "apiRole0DDF0297",
                        "Arn"
                      ]
                    },
                    "httpMethod": "POST",
                    "payloadFormatVersion": 1,
                    "type": "AWS_PROXY",
                    "uri": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",
                          {
                            "Fn::GetAtt": [
                              "CreateSlotsDockerE7D6E292",
                              "Arn"
                            ]
                          },
                          "/invocations"
                        ]
                      ]
                    }
                  }
                }
              },
              "/farm/{farm-id}/slots/docker-custom": {
                "post": {
                  "operationId": "Create Delivery Slot Docker Custom",
                  "parameters": [
                    {
                      "in": "path",
                      "name": "farm-id",
                      "required": true,
                      "schema": {
                        "type": "string"
                      }
                    }
                  ],
                  "requestBody": {
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/CreateSlot"
                        }
                      }
                    },
                    "required": true
                  },
                  "responses": {
                    "200": {
                      "description": "200 response",
                      "headers": {
                        "Access-Control-Allow-Origin": {
                          "schema": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  },
                  "x-amazon-apigateway-integration": {
                    "credentials": {
                      "Fn::GetAtt": [
                        "apiRole0DDF0297",
                        "Arn"
                      ]
                    },
                    "httpMethod": "POST",
                    "payloadFormatVersion": 1,
                    "type": "AWS_PROXY",
                    "uri": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",
                          {
                            "Fn::GetAtt": [
                              "CreateSlotsDockerCustomA8B5199F",
                              "Arn"
                            ]
                          },
                          "/invocations"
                        ]
                      ]
                    }
                  }
                }
              },
              "/farm/{farm-id}/slots/uber": {
                "post": {
                  "operationId": "Create Delivery Slot Uber",
                  "parameters": [
                    {
                      "in": "path",
                      "name": "farm-id",
                      "required": true,
                      "schema": {
                        "type": "string"
                      }
                    }
                  ],
                  "requestBody": {
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/CreateSlot"
                        }
                      }
                    },
                    "required": true
                  },
                  "responses": {
                    "200": {
                      "description": "200 response",
                      "headers": {
                        "Access-Control-Allow-Origin": {
                          "schema": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  },
                  "x-amazon-apigateway-integration": {
                    "credentials": {
                      "Fn::GetAtt": [
                        "apiRole0DDF0297",
                        "Arn"
                      ]
                    },
                    "httpMethod": "POST",
                    "payloadFormatVersion": 1,
                    "type": "AWS_PROXY",
                    "uri": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",
                          {
                            "Fn::GetAtt": [
                              "CreateSlotsUber6856C731",
                              "Arn"
                            ]
                          },
                          "/invocations"
                        ]
                      ]
                    }
                  }
                }
              }
            }
          },
          "StageName": "Prod"
        },
        "Type": "AWS::Serverless::Api"
      },
      "ILMLFDeliveryAccessF3713532": {
        "DeletionPolicy": "Retain",
        "Properties": {
          "RetentionInDays": 60
        },
        "Type": "AWS::Logs::LogGroup",
        "UpdateReplacePolicy": "Retain"
      },
      "InvokePopulateDataProviderframeworkonEvent9A3B4E42": {
        "DependsOn": [
          "InvokePopulateDataProviderframeworkonEventServiceRoleDefaultPolicy67D538A8",
          "InvokePopulateDataProviderframeworkonEventServiceRole2282706B"
        ],
        "Properties": {
          "Code": {
            "S3Bucket": {
              "Ref": "AssetParametersc691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49cS3BucketEAC9DD43"
            },
            "S3Key": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::Select": [
                      0,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersc691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49cS3VersionKeyDD9AE9E7"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "Fn::Select": [
                      1,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersc691172cdeefa2c91b5a2907f9d81118e47597634943344795f1a844192dd49cS3VersionKeyDD9AE9E7"
                          }
                        ]
                      }
                    ]
                  }
                ]
              ]
            }
          },
          "Description": "AWS CDK resource provider framework - onEvent (DeliveryProject-Api/InvokePopulateDataProvider)",
          "Environment": {
            "Variables": {
              "USER_ON_EVENT_FUNCTION_ARN": {
                "Fn::GetAtt": [
                  "PopulateFarmDb3F2D1135",
                  "Arn"
                ]
              }
            }
          },
          "Handler": "framework.onEvent",
          "Role": {
            "Fn::GetAtt": [
              "InvokePopulateDataProviderframeworkonEventServiceRole2282706B",
              "Arn"
            ]
          },
          "Runtime": "nodejs14.x",
          "Timeout": 900
        },
        "Type": "AWS::Lambda::Function"
      },
      "InvokePopulateDataProviderframeworkonEventServiceRole2282706B": {
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "lambda.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          },
          "ManagedPolicyArns": [
            {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                ]
              ]
            }
          ]
        },
        "Type": "AWS::IAM::Role"
      },
      "InvokePopulateDataProviderframeworkonEventServiceRoleDefaultPolicy67D538A8": {
        "Properties": {
          "PolicyDocument": {
            "Statement": [
              {
                "Action": "lambda:InvokeFunction",
                "Effect": "Allow",
                "Resource": {
                  "Fn::GetAtt": [
                    "PopulateFarmDb3F2D1135",
                    "Arn"
                  ]
                }
              }
            ],
            "Version": "2012-10-17"
          },
          "PolicyName": "InvokePopulateDataProviderframeworkonEventServiceRoleDefaultPolicy67D538A8",
          "Roles": [
            {
              "Ref": "InvokePopulateDataProviderframeworkonEventServiceRole2282706B"
            }
          ]
        },
        "Type": "AWS::IAM::Policy"
      },
      "PopulateDataProviderv22": {
        "DeletionPolicy": "Delete",
        "Properties": {
          "ServiceToken": {
            "Fn::GetAtt": [
              "InvokePopulateDataProviderframeworkonEvent9A3B4E42",
              "Arn"
            ]
          },
          "SqlScript": "CREATE DATABASE IF NOT EXISTS deliverydb;\nUSE deliverydb;\n\nCREATE TABLE IF NOT EXISTS delivery_slot\n(\n    slot_id           integer primary key auto_increment not null,\n    delivery_date     date                               not null,\n    slot_from         datetime                           not null,\n    slot_to           datetime                           not null,\n    avail_deliveries  int                                not null,\n    booked_deliveries int,\n    farm_id           integer                            not null\n);\n\nCREATE TABLE IF NOT EXISTS delivery\n(\n    delivery_id integer primary key auto_increment not null,\n    slot_id     integer                            not null,\n    user_id     integer                            not null,\n    farm_id     integer                            not null\n);\n\nDROP USER IF EXISTS '{{username}}';\n\nCREATE USER IF NOT EXISTS '{{username}}' identified by '{{password}}';\nGRANT DELETE, UPDATE, INSERT, SELECT ON deliverydb.* TO '{{username}}';\nFLUSH PRIVILEGES;\n"
        },
        "Type": "Custom::PopulateDataProvider",
        "UpdateReplacePolicy": "Delete"
      },
      "PopulateFarmDb3F2D1135": {
        "DependsOn": [
          "FarmLambdaRdsRoleWithPwDefaultPolicyAD630DD5",
          "FarmLambdaRdsRoleWithPwF0CBBFD7"
        ],
        "Properties": {
          "Code": {
            "S3Bucket": {
              "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3BucketFEE641E3"
            },
            "S3Key": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::Select": [
                      0,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "Fn::Select": [
                      1,
                      {
                        "Fn::Split": [
                          "||",
                          {
                            "Ref": "AssetParametersd120cdbcddfb180e262424f79897e84e21d040e072a650a00c87e3728dab37fbS3VersionKeyD535D084"
                          }
                        ]
                      }
                    ]
                  }
                ]
              ]
            }
          },
          "Environment": {
            "Variables": {
              "CORS_ALLOW_ORIGIN_HEADER": "*",
              "DB_ADMIN_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
                      }
                    ]
                  }
                ]
              },
              "DB_ENDPOINT": {
                "Fn::Join": [
                  "",
                  [
                    {
                      "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDBC89642C8EndpointAddressAE4CE17F"
                    },
                    ":",
                    {
                      "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDBC89642C8EndpointPortECF13DED"
                    }
                  ]
                ]
              },
              "DB_PORT": "3306",
              "DB_REGION": "eu-west-1",
              "DB_USER": "lambda_iam",
              "DB_USER_SECRET": {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
                      }
                    ]
                  }
                ]
              },
              "JAVA_TOOL_OPTIONS": "-XX:+TieredCompilation -XX:TieredStopAtLevel=1"
            }
          },
          "Handler": "com.ilmlf.delivery.api.handlers.PopulateFarmDb",
          "MemorySize": 2048,
          "Role": {
            "Fn::GetAtt": [
              "FarmLambdaRdsRoleWithPwF0CBBFD7",
              "Arn"
            ]
          },
          "Runtime": "java11",
          "Timeout": 60,
          "VpcConfig": {
            "SecurityGroupIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
              }
            ],
            "SubnetIds": [
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
              },
              {
                "Fn::ImportValue": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
              }
            ]
          }
        },
        "Type": "AWS::Lambda::Function"
      },
      "apiRole0DDF0297": {
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "apigateway.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          },
          "ManagedPolicyArns": [
            {
              "Fn::Join": [
                "",
                [
                  "arn:",
                  {
                    "Ref": "AWS::Partition"
                  },
                  ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
                ]
              ]
            }
          ]
        },
        "Type": "AWS::IAM::Role"
      },
      "apiRoleDefaultPolicy771DC0DD": {
        "Properties": {
          "PolicyDocument": {
            "Statement": [
              {
                "Action": "lambda:InvokeFunction",
                "Effect": "Allow",
                "Resource": [
                  {
                    "Fn::GetAtt": [
                      "CreateSlots2FADEA09",
                      "Arn"
                    ]
                  },
                  {
                    "Fn::GetAtt": [
                      "CreateSlotsUber6856C731",
                      "Arn"
                    ]
                  },
                  {
                    "Fn::GetAtt": [
                      "CreateSlotsCustomA504AA22",
                      "Arn"
                    ]
                  },
                  {
                    "Fn::GetAtt": [
                      "CreateSlotsDockerE7D6E292",
                      "Arn"
                    ]
                  },
                  {
                    "Fn::GetAtt": [
                      "CreateSlotsDockerCustomA8B5199F",
                      "Arn"
                    ]
                  },
                  {
                    "Fn::GetAtt": [
                      "GetSlots6224F85D",
                      "Arn"
                    ]
                  },
                  {
                    "Fn::GetAtt": [
                      "BookDelivery402AFA0C",
                      "Arn"
                    ]
                  }
                ]
              }
            ],
            "Version": "2012-10-17"
          },
          "PolicyName": "apiRoleDefaultPolicy771DC0DD",
          "Roles": [
            {
              "Ref": "apiRole0DDF0297"
            }
          ]
        },
        "Type": "AWS::IAM::Policy"
      }
    },
    "Transform": "AWS::Serverless-2016-10-31"
  }
]


com.ilmlf.delivery.DeliveryAppTest.testDbStack=[
  {
    "Outputs": {
      "ExportsOutputFnGetAttFarmerDBC89642C8EndpointAddressAE4CE17F": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDBC89642C8EndpointAddressAE4CE17F"
        },
        "Value": {
          "Fn::GetAtt": [
            "FarmerDBC89642C8",
            "Endpoint.Address"
          ]
        }
      },
      "ExportsOutputFnGetAttFarmerDBC89642C8EndpointPortECF13DED": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDBC89642C8EndpointPortECF13DED"
        },
        "Value": {
          "Fn::GetAtt": [
            "FarmerDBC89642C8",
            "Endpoint.Port"
          ]
        }
      },
      "ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDbProxy7A9720C2EndpointD09B79E2"
        },
        "Value": {
          "Fn::GetAtt": [
            "FarmerDbProxy7A9720C2",
            "Endpoint"
          ]
        }
      },
      "ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputFnGetAttFarmerDeliverySGDA50C27CGroupIdB07DB7C1"
        },
        "Value": {
          "Fn::GetAtt": [
            "FarmerDeliverySGDA50C27C",
            "GroupId"
          ]
        }
      },
      "ExportsOutputRefDbUserSecret7350D430EDA80404": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputRefDbUserSecret7350D430EDA80404"
        },
        "Value": {
          "Ref": "DbUserSecret7350D430"
        }
      },
      "ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputRefDeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb38EEDF77"
        },
        "Value": {
          "Ref": "DeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb"
        }
      },
      "ExportsOutputRefFarmerDBSecretAttachment8D79E04A025407E0": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputRefFarmerDBSecretAttachment8D79E04A025407E0"
        },
        "Value": {
          "Ref": "FarmerDBSecretAttachment8D79E04A"
        }
      },
      "ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet1SubnetCCC9274B1F280ACB"
        },
        "Value": {
          "Ref": "farmerVpcPrivateSubnet1SubnetCCC9274B"
        }
      },
      "ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet2SubnetE7B0A714A1ABAF28"
        },
        "Value": {
          "Ref": "farmerVpcPrivateSubnet2SubnetE7B0A714"
        }
      },
      "ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102": {
        "Export": {
          "Name": "DeliveryProject-Db:ExportsOutputReffarmerVpcPrivateSubnet3Subnet1ED561EADF4C4102"
        },
        "Value": {
          "Ref": "farmerVpcPrivateSubnet3Subnet1ED561EA"
        }
      }
    },
    "Resources": {
      "DbUserSecret7350D430": {
        "Properties": {
          "Description": "Db Username and password",
          "GenerateSecretString": {
            "ExcludePunctuation": true,
            "GenerateStringKey": "password",
            "PasswordLength": 16,
            "SecretStringTemplate": "{\"username\": \"lambda_iam\"}"
          }
        },
        "Type": "AWS::SecretsManager::Secret"
      },
      "DeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb": {
        "Properties": {
          "Description": {
            "Fn::Join": [
              "",
              [
                "Generated by the CDK for stack: ",
                {
                  "Ref": "AWS::StackName"
                }
              ]
            ]
          },
          "GenerateSecretString": {
            "ExcludeCharacters": " %+~`#$&*()|[]{}:;<>?!'/@\"\\",
            "GenerateStringKey": "password",
            "PasswordLength": 30,
            "SecretStringTemplate": "{\"username\":\"FarmerDBadmin\"}"
          }
        },
        "Type": "AWS::SecretsManager::Secret"
      },
      "FarmerDBC89642C8": {
        "DeletionPolicy": "Snapshot",
        "Properties": {
          "AllocatedStorage": "25",
          "AutoMinorVersionUpgrade": true,
          "BackupRetentionPeriod": 7,
          "CopyTagsToSnapshot": true,
          "DBInstanceClass": "db.t2.small",
          "DBName": "FarmerDB",
          "DBSubnetGroupName": {
            "Ref": "FarmerDBSubnetGroup1B4DA139"
          },
          "DeletionProtection": false,
          "Engine": "mysql",
          "EngineVersion": "5.7.31",
          "MasterUserPassword": {
            "Fn::Join": [
              "",
              [
                "{{resolve:secretsmanager:",
                {
                  "Ref": "DeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb"
                },
                ":SecretString:password::}}"
              ]
            ]
          },
          "MasterUsername": "FarmerDBadmin",
          "MultiAZ": true,
          "Port": "3306",
          "PubliclyAccessible": true,
          "StorageEncrypted": true,
          "StorageType": "gp2",
          "VPCSecurityGroups": [
            {
              "Fn::GetAtt": [
                "FarmerDeliverySGDA50C27C",
                "GroupId"
              ]
            }
          ]
        },
        "Type": "AWS::RDS::DBInstance",
        "UpdateReplacePolicy": "Snapshot"
      },
      "FarmerDBSecretAttachment8D79E04A": {
        "Properties": {
          "SecretId": {
            "Ref": "DeliveryProjectDbFarmerDBSecretF1D2B0893fdaad7efa858a3daf9490cf0a702aeb"
          },
          "TargetId": {
            "Ref": "FarmerDBC89642C8"
          },
          "TargetType": "AWS::RDS::DBInstance"
        },
        "Type": "AWS::SecretsManager::SecretTargetAttachment"
      },
      "FarmerDBSubnetGroup1B4DA139": {
        "Properties": {
          "DBSubnetGroupDescription": "Subnet group for FarmerDB database",
          "SubnetIds": [
            {
              "Ref": "farmerVpcPrivateSubnet1SubnetCCC9274B"
            },
            {
              "Ref": "farmerVpcPrivateSubnet2SubnetE7B0A714"
            },
            {
              "Ref": "farmerVpcPrivateSubnet3Subnet1ED561EA"
            }
          ]
        },
        "Type": "AWS::RDS::DBSubnetGroup"
      },
      "FarmerDbProxy7A9720C2": {
        "Properties": {
          "Auth": [
            {
              "AuthScheme": "SECRETS",
              "IAMAuth": "REQUIRED",
              "SecretArn": {
                "Ref": "FarmerDBSecretAttachment8D79E04A"
              }
            },
            {
              "AuthScheme": "SECRETS",
              "IAMAuth": "REQUIRED",
              "SecretArn": {
                "Ref": "DbUserSecret7350D430"
              }
            }
          ],
          "DBProxyName": "FarmerDbProxy",
          "EngineFamily": "MYSQL",
          "RequireTLS": true,
          "RoleArn": {
            "Fn::GetAtt": [
              "RdsProxyRole46223FF5",
              "Arn"
            ]
          },
          "VpcSecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "FarmerDeliverySGDA50C27C",
                "GroupId"
              ]
            }
          ],
          "VpcSubnetIds": [
            {
              "Ref": "farmerVpcPrivateSubnet1SubnetCCC9274B"
            },
            {
              "Ref": "farmerVpcPrivateSubnet2SubnetE7B0A714"
            },
            {
              "Ref": "farmerVpcPrivateSubnet3Subnet1ED561EA"
            }
          ]
        },
        "Type": "AWS::RDS::DBProxy"
      },
      "FarmerDbProxyProxyTargetGroupEC553179": {
        "Properties": {
          "ConnectionPoolConfigurationInfo": {
            "ConnectionBorrowTimeout": 30,
            "MaxConnectionsPercent": 50
          },
          "DBInstanceIdentifiers": [
            {
              "Ref": "FarmerDBC89642C8"
            }
          ],
          "DBProxyName": {
            "Ref": "FarmerDbProxy7A9720C2"
          },
          "TargetGroupName": "default"
        },
        "Type": "AWS::RDS::DBProxyTargetGroup"
      },
      "FarmerDeliverySGDA50C27C": {
        "Properties": {
          "GroupDescription": "Shared SG for database and proxy",
          "SecurityGroupEgress": [
            {
              "CidrIp": "0.0.0.0/0",
              "Description": "Allow all outbound traffic by default",
              "IpProtocol": "-1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::SecurityGroup"
      },
      "FarmerDeliverySGfromDeliveryProjectDbFarmerDeliverySG5B636083IndirectPort69472C7D": {
        "Properties": {
          "Description": "Allow connections to the database Instance from the Proxy",
          "FromPort": {
            "Fn::GetAtt": [
              "FarmerDBC89642C8",
              "Endpoint.Port"
            ]
          },
          "GroupId": {
            "Fn::GetAtt": [
              "FarmerDeliverySGDA50C27C",
              "GroupId"
            ]
          },
          "IpProtocol": "tcp",
          "SourceSecurityGroupId": {
            "Fn::GetAtt": [
              "FarmerDeliverySGDA50C27C",
              "GroupId"
            ]
          },
          "ToPort": {
            "Fn::GetAtt": [
              "FarmerDBC89642C8",
              "Endpoint.Port"
            ]
          }
        },
        "Type": "AWS::EC2::SecurityGroupIngress"
      },
      "RdsProxyRole46223FF5": {
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "rds.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          }
        },
        "Type": "AWS::IAM::Role"
      },
      "RdsProxyRoleDefaultPolicy2AF84426": {
        "Properties": {
          "PolicyDocument": {
            "Statement": [
              {
                "Action": [
                  "secretsmanager:GetSecretValue",
                  "secretsmanager:DescribeSecret"
                ],
                "Effect": "Allow",
                "Resource": {
                  "Ref": "FarmerDBSecretAttachment8D79E04A"
                }
              },
              {
                "Action": [
                  "secretsmanager:GetSecretValue",
                  "secretsmanager:DescribeSecret"
                ],
                "Effect": "Allow",
                "Resource": {
                  "Ref": "DbUserSecret7350D430"
                }
              }
            ],
            "Version": "2012-10-17"
          },
          "PolicyName": "RdsProxyRoleDefaultPolicy2AF84426",
          "Roles": [
            {
              "Ref": "RdsProxyRole46223FF5"
            }
          ]
        },
        "Type": "AWS::IAM::Policy"
      },
      "farmerVpc3E1EF418": {
        "Properties": {
          "CidrBlock": "10.0.0.0/16",
          "EnableDnsHostnames": true,
          "EnableDnsSupport": true,
          "InstanceTenancy": "default",
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc"
            }
          ]
        },
        "Type": "AWS::EC2::VPC"
      },
      "farmerVpcIGW77EA3214": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc"
            }
          ]
        },
        "Type": "AWS::EC2::InternetGateway"
      },
      "farmerVpcPrivateSubnet1DefaultRoute21094D32": {
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "NatGatewayId": {
            "Ref": "farmerVpcPublicSubnet1NATGatewayAA1B3859"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet1RouteTableEA47B893"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPrivateSubnet1RouteTableAssociationB94D34C5": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet1RouteTableEA47B893"
          },
          "SubnetId": {
            "Ref": "farmerVpcPrivateSubnet1SubnetCCC9274B"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPrivateSubnet1RouteTableEA47B893": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PrivateSubnet1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPrivateSubnet1SubnetCCC9274B": {
        "Properties": {
          "AvailabilityZone": "dummy1a",
          "CidrBlock": "10.0.96.0/19",
          "MapPublicIpOnLaunch": false,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Private"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Private"
            },
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PrivateSubnet1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcPrivateSubnet2DefaultRouteE813B3CB": {
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "NatGatewayId": {
            "Ref": "farmerVpcPublicSubnet2NATGateway1A387200"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet2RouteTable859130FB"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPrivateSubnet2RouteTable859130FB": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PrivateSubnet2"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPrivateSubnet2RouteTableAssociationB35F50E8": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet2RouteTable859130FB"
          },
          "SubnetId": {
            "Ref": "farmerVpcPrivateSubnet2SubnetE7B0A714"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPrivateSubnet2SubnetE7B0A714": {
        "Properties": {
          "AvailabilityZone": "dummy1b",
          "CidrBlock": "10.0.128.0/19",
          "MapPublicIpOnLaunch": false,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Private"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Private"
            },
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PrivateSubnet2"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcPrivateSubnet3DefaultRoute4B8191D6": {
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "NatGatewayId": {
            "Ref": "farmerVpcPublicSubnet3NATGatewayBE3A3665"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet3RouteTable565CDBD6"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPrivateSubnet3RouteTable565CDBD6": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PrivateSubnet3"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPrivateSubnet3RouteTableAssociationC900821D": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet3RouteTable565CDBD6"
          },
          "SubnetId": {
            "Ref": "farmerVpcPrivateSubnet3Subnet1ED561EA"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPrivateSubnet3Subnet1ED561EA": {
        "Properties": {
          "AvailabilityZone": "dummy1c",
          "CidrBlock": "10.0.160.0/19",
          "MapPublicIpOnLaunch": false,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Private"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Private"
            },
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PrivateSubnet3"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcPublicSubnet1DefaultRouteD45A595C": {
        "DependsOn": [
          "farmerVpcVPCGW5B113563"
        ],
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "GatewayId": {
            "Ref": "farmerVpcIGW77EA3214"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet1RouteTable70D29438"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPublicSubnet1EIPB227751A": {
        "Properties": {
          "Domain": "vpc",
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet1"
            }
          ]
        },
        "Type": "AWS::EC2::EIP"
      },
      "farmerVpcPublicSubnet1NATGatewayAA1B3859": {
        "Properties": {
          "AllocationId": {
            "Fn::GetAtt": [
              "farmerVpcPublicSubnet1EIPB227751A",
              "AllocationId"
            ]
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet1SubnetD688CBA4"
          },
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet1"
            }
          ]
        },
        "Type": "AWS::EC2::NatGateway"
      },
      "farmerVpcPublicSubnet1RouteTable70D29438": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPublicSubnet1RouteTableAssociation8318E69F": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet1RouteTable70D29438"
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet1SubnetD688CBA4"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPublicSubnet1SubnetD688CBA4": {
        "Properties": {
          "AvailabilityZone": "dummy1a",
          "CidrBlock": "10.0.0.0/19",
          "MapPublicIpOnLaunch": true,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Public"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Public"
            },
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcPublicSubnet2DefaultRouteEE7A93B6": {
        "DependsOn": [
          "farmerVpcVPCGW5B113563"
        ],
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "GatewayId": {
            "Ref": "farmerVpcIGW77EA3214"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet2RouteTable3FCC446A"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPublicSubnet2EIPFCBCD01A": {
        "Properties": {
          "Domain": "vpc",
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet2"
            }
          ]
        },
        "Type": "AWS::EC2::EIP"
      },
      "farmerVpcPublicSubnet2NATGateway1A387200": {
        "Properties": {
          "AllocationId": {
            "Fn::GetAtt": [
              "farmerVpcPublicSubnet2EIPFCBCD01A",
              "AllocationId"
            ]
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet2Subnet9E651304"
          },
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet2"
            }
          ]
        },
        "Type": "AWS::EC2::NatGateway"
      },
      "farmerVpcPublicSubnet2RouteTable3FCC446A": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet2"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPublicSubnet2RouteTableAssociation0F0AFA60": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet2RouteTable3FCC446A"
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet2Subnet9E651304"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPublicSubnet2Subnet9E651304": {
        "Properties": {
          "AvailabilityZone": "dummy1b",
          "CidrBlock": "10.0.32.0/19",
          "MapPublicIpOnLaunch": true,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Public"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Public"
            },
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet2"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcPublicSubnet3DefaultRoute53761331": {
        "DependsOn": [
          "farmerVpcVPCGW5B113563"
        ],
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "GatewayId": {
            "Ref": "farmerVpcIGW77EA3214"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet3RouteTableB8F0D062"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPublicSubnet3EIP87F3AB2E": {
        "Properties": {
          "Domain": "vpc",
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet3"
            }
          ]
        },
        "Type": "AWS::EC2::EIP"
      },
      "farmerVpcPublicSubnet3NATGatewayBE3A3665": {
        "Properties": {
          "AllocationId": {
            "Fn::GetAtt": [
              "farmerVpcPublicSubnet3EIP87F3AB2E",
              "AllocationId"
            ]
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet3SubnetBC57D4AB"
          },
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet3"
            }
          ]
        },
        "Type": "AWS::EC2::NatGateway"
      },
      "farmerVpcPublicSubnet3RouteTableAssociation2B98AA24": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet3RouteTableB8F0D062"
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet3SubnetBC57D4AB"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPublicSubnet3RouteTableB8F0D062": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet3"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPublicSubnet3SubnetBC57D4AB": {
        "Properties": {
          "AvailabilityZone": "dummy1c",
          "CidrBlock": "10.0.64.0/19",
          "MapPublicIpOnLaunch": true,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Public"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Public"
            },
            {
              "Key": "Name",
              "Value": "DeliveryProject-Db/farmer-Vpc/PublicSubnet3"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcVPCGW5B113563": {
        "Properties": {
          "InternetGatewayId": {
            "Ref": "farmerVpcIGW77EA3214"
          },
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::VPCGatewayAttachment"
      }
    }
  }
]